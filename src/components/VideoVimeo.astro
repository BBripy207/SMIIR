---
export interface Props {
    title?: string;
    description?: string;
    vimeoId: string;
    titleClass?: string;
    descriptionClass?: string;
    autoplay?: boolean;
    muted?: boolean;
    loop?: boolean;
}

const {
    title,
    description,
    vimeoId,
    titleClass = 'interaction-title-purple',
    descriptionClass = 'tech-description',
    autoplay = true,
    muted = true,
    loop = true,
} = Astro.props;

// Construir la URL de Vimeo con parámetros
const vimeoParams = new URLSearchParams({
    badge: '0', // Sin badge de Vimeo
    autopause: '0',
    player_id: '0',
    app_id: '58479',
    title: '0', // Sin título del video
    byline: '0', // Sin información del autor
    portrait: '0', // Sin avatar del autor
    color: 'ffffff', // Color de controles blanco
    volume: '0', // Sin control de volumen
});

// Solo agregar parámetros si se especifican
if (autoplay) vimeoParams.set('autoplay', '1');
if (muted) vimeoParams.set('muted', '1');
if (loop) vimeoParams.set('loop', '1');

const vimeoUrl = `https://player.vimeo.com/video/${vimeoId}?${vimeoParams.toString()}`;
---

{title && <h2 class={titleClass}>{title}</h2>}
{description && <p class={descriptionClass} set:html={description} />}

<div class="vimeo-container">
    <iframe
        src={vimeoUrl}
        title={title || 'Video Demo'}
        allow="autoplay; fullscreen; picture-in-picture"
        allowfullscreen
    >
    </iframe>
</div>

<style>
    /* Contenedor de video Vimeo */
    .vimeo-container {
        margin: 2rem auto;
        width: 100%;
        max-width: 800px;
        position: relative;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        background: #000;
    }

    .vimeo-container iframe {
        width: 100%;
        height: 450px;
        border: none;
        border-radius: 16px;
        display: block;
    }

    /* Títulos y descripciones */
    .interaction-title-purple {
        font-size: 2.5rem;
        font-weight: 700;
        text-align: center;
        margin: 2rem 0 1rem 0;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.2;
    }

    .tech-description {
        font-size: 1.1rem;
        color: #a1a1aa;
        text-align: center;
        margin-bottom: 2rem;
        line-height: 1.6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .vimeo-container {
            margin: 1.5rem auto;
            border-radius: 12px;
        }

        .vimeo-container iframe {
            height: 280px;
            border-radius: 12px;
        }

        .interaction-title-purple {
            font-size: 2rem;
            margin: 1.5rem 0 0.8rem 0;
        }

        .tech-description {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            padding: 0 10px;
        }
    }

    @media (max-width: 480px) {
        .vimeo-container iframe {
            height: 220px;
        }

        .interaction-title-purple {
            font-size: 1.8rem;
        }
    }
</style>
